<!DOCTYPE html>
<html>

<head>
  <title>Purchase Entry</title>
  <link rel="stylesheet" href="css/purchase.css">
</head>

<body>

  <nav class="navbar">
    <div class="logo">ðŸŒ¾ MandiLedger ERP</div>
    <div class="nav-links">
      <a href="dashboard.html">Dashboard</a>
      <a href="parties.html">Parties</a>
      <a href="brokers.html">Brokers</a>
      <a href="transports.html">Transport</a>
      <a href="sale.html">Sale</a>
      <a href="ledger.html">Ledger</a>
      <a href="payments.html">Payments</a>
      <a href="vouchers.html" class="active">Vouchers</a>
      <a href="stock-report.html">Stock Report</a>
      <a href="reports.html">Reports</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>
  </nav>
  <div class="purchase-container">

    <!-- LEFT FORM -->
    <div class="purchase-form">

  <h2>ðŸ“¥ Purchase Entry (Farmer)</h2>

  <!-- ================= STEP BUTTONS ================= -->
  <div class="voucher-steps">

    <div class="voucher-card active" onclick="openSection('farmerSection', this)">
      <div class="icon">ðŸ‘¤</div>
      <div class="title">Farmer Detail</div>
    </div>

    <div class="voucher-card" onclick="openSection('commoditySection', this)">
      <div class="icon">ðŸŒ¾</div>
      <div class="title">Commodity</div>
    </div>

    <div class="voucher-card" onclick="openSection('extraSection', this)">
      <div class="icon">ðŸš›</div>
      <div class="title">Extra Detail</div>
    </div>

    <div class="voucher-card save-card" onclick="openSection('saveSection',this)">
    <div class="icon">ðŸ’¾</div>
    <div class="title">Save</div>
  </div>

  </div>

  <!-- ================= FARMER SECTION ================= -->
  <div id="farmerSection" class="form-section active-section">

    <label>Farmer</label>
    <input id="farmerSearch" placeholder="Search farmer by name">
    <div id="farmerList" class="dropdown"></div>
    <input type="hidden" id="party_id">

    <div class="row">
      <div>
        <label>Mobile</label>
        <input id="farmer_mobile" disabled>
      </div>
      <div>
        <label>Address</label>
        <input id="farmer_address" disabled>
      </div>
    </div>

  </div>

  <!-- ================= COMMODITY SECTION ================= -->
  <div id="commoditySection" class="form-section">

    <div class="add-commodity-card" onclick="showCommodityForm()">
  <div class="add-icon">âž•</div>
  <div class="add-text">
    <strong>Add Commodity</strong>
    <small>Click to add item details</small>
  </div>
</div>
    <div id="commodityForm" style="display:none; margin-top:15px; border:1px solid #ddd; padding:15px; border-radius:8px;">

      <div class="row">
        <div>
          <label>Commodity</label>
          <select id="commodity" onchange="selectCommodity(this.value)">
            <option value="">Select Commodity</option>
          </select>
        </div>
        <div>
          <label>HSN NO</label>
          <input type="text" id="hsn_no" readonly>
        </div>
      </div>

      <div class="row">
        <div>
          <label>No of Bags</label>
          <input id="bags" type="number">
        </div>
        <div>
          <label>Wajan Dhalta (Gram per Bag)</label>
          <input id="wajan_dhalta_input" type="number">
        </div>
      </div>

      <div class="row">
        <div>
          <label>Quintal</label>
          <input id="quintal" type="number">
        </div>
        <div>
          <label>Kg</label>
          <input id="kg" type="number">
        </div>
      </div>

      <div class="row">
        <div>
          <label>Rate (â‚¹ / Kg)</label>
          <input id="rate" type="number">
        </div>
        <div>
          <label>Mandi Commission (%)</label>
          <input id="commission" type="number">
        </div>
      </div>

      <button type="button" onclick="addCommodityItem()">Add</button>

    </div>

    <hr>
    <h4>Added Commodities</h4>
    <div id="commoditySummary"></div>

  </div>

  <!-- ================= EXTRA DETAIL SECTION ================= -->
  <div id="extraSection" class="form-section">

    <div class="row">
      <div>
        <label>Unloading Charge (â‚¹)</label>
        <input id="unloadingCharge" type="number" value="0" oninput="renderSummary()">
      </div>
    </div>

    <div class="row">
      <div>
        <label>Vehicle No</label>
        <input id="vehicle_no" placeholder="UP32 AB 1234">
      </div>
      <div>
        <label>Gaddi No</label>
        <input id="gaddiNo" placeholder="Enter Gaddi No">
      </div>
    </div>

  </div>
 <!-- ================= STEP 5 ================= -->
      <div class="form-section" id="saveSection" >
        <button class="btn-save" onclick="savePurchase()">ðŸ’¾ Save Purchase Voucher</button>
      </div>

</div>
    <!-- RIGHT SUMMARY -->
    <div class="purchase-summary">

      <h3>ðŸ“Š Calculation Summary</h3>

      <div class="summary-card">
        <span>Total Weight</span>
        <b id="totalWeight">0 Kg</b>
      </div>

      <div class="summary-card">
        <span>Wajan Dhalta</span>
        <b id="dhalta">0 Kg</b>
      </div>

      <div class="summary-card highlight">
        <span>Final Weight</span>
        <b id="finalWeight">0 Kg</b>
      </div>

      <div class="summary-card">
        <span>Gross Amount</span>
        â‚¹ <b id="grossAmount">0</b>
      </div>

      <div class="summary-card">
        <span>Commission</span>
        â‚¹ <input id="discount" disabled>
      </div>

      <div class="summary-card highlight">
        <span>Final Payable</span>
        â‚¹ <b id="netAmount">0</b>
      </div>

    </div>

  </div>

  <script src="js/api.js"></script>
  <script src="js/purchase.js"></script>
</body>

</html>